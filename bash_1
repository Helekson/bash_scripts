#!/bin/bash

# Функция для вывода инструкции
function print_help() {
  echo "Использование: $0 [ключи]"
  echo "Ключи:"
  echo "  -h               Вывести эту справочную информацию"
  echo "  -e <файл>        Перенаправить ошибки в указанный файл"
  echo "  -d <каталог>     Указать каталог для работы (по умолчанию текущий)"
  exit 0
}

# Переменные
error_file="/dev/null"
directory=$(pwd)

# Обработка ключей
while getopts "he:d:" opt; do
  case $opt in
    h)
      print_help
      ;;
    e)
      error_file=$OPTARG
      ;;
    d)
      directory=$OPTARG
      ;;
    *)
      echo "Некорректный ключ. Используйте -h для справки." >&2
      exit 1
      ;;
  esac
done

# Проверка существования каталога
if [ ! -d "$directory" ]; then
  echo "Ошибка: Каталог $directory не существует." > "$error_file"
  exit 1
fi

# Функция для вывода таблицы степеней
function print_table() {
  echo -e "Число\t0\t1\t2\t3\t4\t5\t6"
  for num in {1..9}; do
    echo -n -e "$num\t"
    for exp in {0..6}; do
      echo -n -e "$(bc <<< "$num^$exp")\t"
    done
    echo
  done
}

# Переход в указанный каталог
cd "$directory" || { echo "Ошибка: Не удалось перейти в каталог $directory." > "$error_file"; exit 1; }

# Вывод таблицы степеней
print_table
